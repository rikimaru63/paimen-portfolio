<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AIã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç”Ÿæˆãƒ„ãƒ¼ãƒ«</title>
<meta name="description" content="AIã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç”Ÿæˆãƒ„ãƒ¼ãƒ«ã®ãƒ‡ãƒ¢ã€‚SNSæŠ•ç¨¿ã€ãƒ–ãƒ­ã‚°è¨˜äº‹ã€ã‚­ãƒ£ãƒƒãƒã‚³ãƒ”ãƒ¼ã€ãƒ¡ãƒ¼ãƒ«æ–‡é¢ã‚’AIãŒè‡ªå‹•ä½œæˆã—ã¾ã™ã€‚">
<meta property="og:title" content="AIã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç”Ÿæˆãƒ„ãƒ¼ãƒ« - ãƒ‡ãƒ¢">
<meta property="og:description" content="AIã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç”Ÿæˆãƒ„ãƒ¼ãƒ«ã®ãƒ‡ãƒ¢ã€‚SNSæŠ•ç¨¿ã€ãƒ–ãƒ­ã‚°è¨˜äº‹ã€ã‚­ãƒ£ãƒƒãƒã‚³ãƒ”ãƒ¼ã€ãƒ¡ãƒ¼ãƒ«æ–‡é¢ã‚’AIãŒè‡ªå‹•ä½œæˆã—ã¾ã™ã€‚">
<meta property="og:type" content="website">
<meta property="og:url" content="https://portfolio.logence.co.jp/demos/ai-content/">
<meta property="og:image" content="https://portfolio.logence.co.jp/img/ogp.png">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="AIã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç”Ÿæˆãƒ„ãƒ¼ãƒ« - ãƒ‡ãƒ¢">
<meta name="twitter:description" content="AIã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç”Ÿæˆãƒ„ãƒ¼ãƒ«ã®ãƒ‡ãƒ¢ã€‚SNSæŠ•ç¨¿ã€ãƒ–ãƒ­ã‚°è¨˜äº‹ã€ã‚­ãƒ£ãƒƒãƒã‚³ãƒ”ãƒ¼ã€ãƒ¡ãƒ¼ãƒ«æ–‡é¢ã‚’AIãŒè‡ªå‹•ä½œæˆã—ã¾ã™ã€‚">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=Shippori+Mincho:wght@400;500;600;700&family=Zen+Kaku+Gothic+New:wght@400;500;700&display=swap" rel="stylesheet">
<style>
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
:root{
  /* Accent: avoid purple (AI color). Use iron-navy. */
  --accent:    #17184b;
  --accent-2:  #2d5016;
  --accent-light:#2b2c6a;
  --accent-bg: #EEF0FF;
  --accent-50: #F5F6FF;

  --bg-left:   #F9FAFB;
  --bg-right:  #FFFFFF;
  --gray-50:   #F9FAFB;
  --gray-100:  #F3F4F6;
  --gray-200:  #E5E7EB;
  --gray-300:  #D1D5DB;
  --gray-400:  #9CA3AF;
  --gray-500:  #6B7280;
  --gray-600:  #4B5563;
  --gray-700:  #374151;
  --gray-800:  #1F2937;
  --gray-900:  #111827;

  --radius:    12px;
  --radius-sm: 8px;
  --radius-xs: 4px;

  --shadow:    0 1px 3px rgba(0,0,0,.06), 0 1px 2px rgba(0,0,0,.04);
  --shadow-md: 0 6px 18px rgba(0,0,0,.08);
  --shadow-lg: 0 12px 30px rgba(0,0,0,.10);

  --font-head: 'Shippori Mincho', serif;
  --font-body: 'Zen Kaku Gothic New', sans-serif;
  --font-num:  'DM Sans', sans-serif;
}
html{font-size:16px;-webkit-font-smoothing:antialiased}
body{font-family:var(--font-body);color:var(--gray-800);background:#F8FAFC;min-height:100vh;display:flex;flex-direction:column}

/* â”€â”€â”€ HEADER â”€â”€â”€ */
.site-header{
  position:sticky;top:0;z-index:100;
  background:rgba(248,250,252,.92);
  backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);
  border-bottom:1px solid var(--gray-200);
  padding:0 24px;height:56px;
  display:flex;align-items:center;justify-content:space-between;
}
.back-link{
  display:inline-flex;align-items:center;gap:6px;
  font-size:.875rem;font-weight:500;color:var(--gray-500);
  text-decoration:none;transition:color .15s;
}
.back-link:hover{color:var(--accent)}
.back-link svg{width:16px;height:16px}
.site-title{
  display:flex;align-items:center;gap:10px;
  font-size:1rem;font-weight:700;color:var(--gray-900);
}
.site-title .icon{
  width:28px;height:28px;background:var(--accent);border-radius:var(--radius-xs);
  display:flex;align-items:center;justify-content:center;
  font-size:14px;color:#fff;
}
.header-badge{
  font-size:.7rem;font-weight:700;color:var(--accent);
  background:var(--accent-bg);padding:2px 8px;border-radius:999px;
  font-family:var(--font-num);
}

/* â”€â”€â”€ SCREEN 1: TEMPLATES â”€â”€â”€ */
.screen{display:none;flex:1}
.screen.active{display:flex;flex-direction:column}

.templates-screen{padding:0 24px 54px;max-width:1020px;margin:0 auto;width:100%}
.hero-section{
  padding:40px 0 28px;position:relative;
}
.hero-section::before{
  content:'';position:absolute;top:-30px;left:-60px;width:200px;height:200px;
  background:radial-gradient(circle,rgba(23,24,75,.04) 0%,transparent 70%);
  border-radius:50%;pointer-events:none;
}
.hero-section::after{
  content:'';position:absolute;top:20px;right:-30px;width:140px;height:140px;
  background:radial-gradient(circle,rgba(45,80,22,.03) 0%,transparent 70%);
  border-radius:50%;pointer-events:none;
}
.templates-hero{display:grid;grid-template-columns:6fr 4fr;align-items:end;gap:24px;margin-bottom:0}
.templates-hero h1{
  font-family:var(--font-head);font-size:2.1rem;font-weight:700;
  color:var(--gray-900);margin-bottom:12px;letter-spacing:.02em;line-height:1.4;
}
.hero-accent{
  display:inline;position:relative;
}
.hero-accent::after{
  content:'';position:absolute;bottom:2px;left:-2px;right:-2px;height:8px;
  background:rgba(23,24,75,.07);border-radius:4px;z-index:-1;
}
.hero-tagline{
  display:inline-flex;align-items:center;gap:6px;
  font-size:.78rem;font-weight:700;color:var(--accent);
  background:var(--accent-bg);padding:5px 14px;border-radius:999px;
  margin-bottom:16px;letter-spacing:.01em;
}
.hero-tagline svg{width:14px;height:14px}
.hero-subtitle{font-size:.92rem;color:var(--gray-500);line-height:1.8}
.templates-hero p{font-size:.85rem;color:var(--gray-400);line-height:1.8}
.templates-note{
  background:var(--accent-50);
  border:1px solid rgba(23,24,75,.06);
  border-radius:var(--radius-sm);
  padding:14px 16px;
  color:var(--gray-600);
  font-size:.8rem;line-height:1.7;
}
.templates-note strong{color:var(--gray-800);font-weight:700}

/* Tabs */
.tabs{display:flex;gap:6px;justify-content:flex-start;margin:18px 0 22px;flex-wrap:wrap}
.tab{
  padding:8px 18px;border-radius:999px;font-size:.85rem;font-weight:600;
  border:1.5px solid var(--gray-200);background:#fff;color:var(--gray-500);
  cursor:pointer;transition:all .25s cubic-bezier(.4,0,.2,1);user-select:none;
  font-family:var(--font-body);
}
.tab:hover{border-color:var(--accent-light);color:var(--accent);background:var(--accent-50)}
.tab.active{background:var(--accent);color:#fff;border-color:var(--accent);box-shadow:0 2px 8px rgba(23,24,75,.18)}

/* Cards grid (broken, with featured) */
.cards-grid{
  display:grid;
  grid-template-columns: 2fr 1fr 1fr;
  grid-auto-rows: 1fr;
  gap:16px;
}
.card{
  background:#fff;border:1.5px solid var(--gray-200);border-radius:var(--radius);
  padding:22px 20px;cursor:pointer;
  transition:border-color .25s, box-shadow .3s cubic-bezier(.4,0,.2,1), background .25s, transform .3s cubic-bezier(.4,0,.2,1);
  position:relative;overflow:hidden;
}
.card:hover{
  border-color:var(--accent-light);
  box-shadow:0 8px 25px rgba(23,24,75,.08), 0 2px 8px rgba(0,0,0,.04);
  background:var(--accent-50);transform:translateY(-3px);
}
.card:active{box-shadow:var(--shadow);transform:translateY(0)}
.card.featured{
  grid-column: 1 / 2;
  grid-row: span 2;
  padding:28px 26px;
  box-shadow: var(--shadow);
  border:1.5px solid rgba(23,24,75,.1);
  background:linear-gradient(135deg,#fff 0%,var(--accent-50) 100%);
}
.card.featured:hover{
  background:linear-gradient(135deg,var(--accent-50) 0%,#EEF0FF 100%);
}
.card.featured h3{font-family:var(--font-head);font-size:1.1rem}
.card-icon{
  width:44px;height:44px;border-radius:10px;
  display:flex;align-items:center;justify-content:center;
  margin-bottom:14px;
}
.card-icon svg{width:22px;height:22px}
.card h3{font-size:.95rem;font-weight:700;color:var(--gray-800);margin-bottom:6px}
.card p{font-size:.8rem;color:var(--gray-500);line-height:1.7}
.card::after{
  content:'';position:absolute;bottom:0;left:0;right:0;height:3px;
  background:var(--accent);transform:scaleX(0);transform-origin:left;
  transition:transform .25s;
}
.card:hover::after{transform:scaleX(1)}

/* Card badges */
.card-badge{
  position:absolute;top:14px;right:14px;
  font-size:.65rem;font-weight:700;letter-spacing:.02em;
  padding:3px 10px;border-radius:999px;
  font-family:var(--font-num);line-height:1.4;
}
.card-badge.popular{background:#FEF3C7;color:#B45309}
.card-badge.recommend{background:#DBEAFE;color:#1D4ED8}
.card-badge.new-badge{background:#D1FAE5;color:#047857}

/* Card preview */
.card-preview{
  margin-top:10px;padding-top:10px;border-top:1px solid var(--gray-100);
  font-size:.75rem;color:var(--gray-400);line-height:1.6;
  display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;
}
.card-preview em{font-style:normal;font-weight:600;color:var(--gray-500)}

/* Category colors */
.cat-sns .card-icon{background:#FEF3C7;color:#D97706}
.cat-blog .card-icon{background:#DBEAFE;color:#2563EB}
.cat-copy .card-icon{background:#FCE7F3;color:#DB2777}
.cat-mail .card-icon{background:#D1FAE5;color:#059669}

/* â”€â”€â”€ SCREEN 2: EDITOR â”€â”€â”€ */
.editor-screen{flex:1;display:flex;flex-direction:column}
.editor-top-bar{
  display:flex;align-items:center;gap:12px;
  padding:12px 24px;border-bottom:1px solid var(--gray-200);background:#fff;
}
.btn-back-editor{
  display:inline-flex;align-items:center;gap:4px;
  font-size:.85rem;font-weight:600;color:var(--gray-500);
  background:none;border:none;cursor:pointer;padding:6px 10px;
  border-radius:var(--radius-xs);transition:background .15s,color .15s;
  font-family:var(--font-body);
}
.btn-back-editor:hover{background:var(--gray-100);color:var(--accent)}
.btn-back-editor svg{width:16px;height:16px}
.editor-template-name{font-size:.9rem;font-weight:700;color:var(--gray-700)}

.editor-body{display:flex;flex:1;min-height:0}

/* Left panel: 4 / 6 ratio overall */
.panel-left{
  width:380px;min-width:340px;background:var(--bg-left);
  border-right:1px solid var(--gray-200);
  padding:28px 24px;overflow-y:auto;display:flex;flex-direction:column;gap:24px;
}
.field-group label{display:block;font-size:.8rem;font-weight:700;color:var(--gray-700);margin-bottom:8px}
.field-group .hint{font-size:.75rem;color:var(--gray-400);margin-top:6px;line-height:1.6}

.text-input{
  width:100%;padding:10px 14px;border:1.5px solid var(--gray-200);border-radius:var(--radius-sm);
  font-size:.9rem;font-family:var(--font-body);color:var(--gray-800);background:#fff;
  transition:border-color .15s,box-shadow .15s;resize:vertical;min-height:80px;
}
.text-input:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 3px rgba(23,24,75,.12)}
.text-input::placeholder{color:var(--gray-400)}

.radio-group{display:flex;gap:10px;flex-wrap:wrap}
.radio-option{position:relative}
.radio-option input{position:absolute;opacity:0;width:0;height:0}
.radio-option span{
  display:inline-flex;align-items:center;gap:6px;
  padding:8px 14px;border:1.5px solid var(--gray-200);border-radius:var(--radius-xs);
  font-size:.85rem;font-weight:600;color:var(--gray-600);cursor:pointer;
  background:#fff;transition:border-color .15s,color .15s,background .15s;user-select:none;
}
.radio-option input:checked + span{border-color:var(--accent);color:var(--accent);background:var(--accent-50)}
.radio-option span:hover{border-color:var(--accent-light)}

.segment-control{display:flex;background:var(--gray-100);border-radius:var(--radius-xs);padding:3px;gap:2px}
.segment-option{position:relative;flex:1}
.segment-option input{position:absolute;opacity:0;width:0;height:0}
.segment-option span{
  display:block;text-align:center;padding:8px 12px;
  font-size:.8rem;font-weight:700;color:var(--gray-500);border-radius:4px;
  cursor:pointer;transition:background .2s,color .2s;user-select:none;
}
.segment-option input:checked + span{background:#fff;color:var(--gray-800);box-shadow:0 1px 2px rgba(0,0,0,.06)}

.btn-generate{
  margin-top:auto;
  width:100%;padding:14px;border:none;border-radius:var(--radius-sm);
  background:linear-gradient(135deg,var(--accent) 0%,#2b2c6a 100%);
  color:#fff;font-size:.95rem;font-weight:700;
  font-family:var(--font-body);cursor:pointer;
  transition:all .25s cubic-bezier(.4,0,.2,1);
  display:flex;align-items:center;justify-content:center;gap:8px;
  box-shadow:0 2px 8px rgba(23,24,75,.2);
}
.btn-generate:hover{background:linear-gradient(135deg,#12133a 0%,var(--accent) 100%);box-shadow:0 4px 14px rgba(23,24,75,.3);transform:translateY(-1px)}
.btn-generate:disabled{opacity:.55;cursor:not-allowed;transform:none;box-shadow:none}
.btn-generate svg{width:18px;height:18px}

/* Right panel */
.panel-right{
  flex:1;background:var(--bg-right);padding:28px 32px;overflow-y:auto;
  display:flex;flex-direction:column;
}

.result-placeholder{
  flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;
  color:var(--gray-400);text-align:center;gap:12px;
}
.result-placeholder svg{width:48px;height:48px;opacity:.4}
.result-placeholder p{font-size:.9rem}

.result-area{display:none;flex-direction:column;flex:1}
.result-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:16px}
.result-label{font-size:.8rem;font-weight:700;color:var(--gray-700);display:flex;align-items:center;gap:6px}
.result-label .dot{width:8px;height:8px;border-radius:50%;background:var(--accent)}
.result-actions{display:flex;gap:8px}

.btn-sm{
  display:inline-flex;align-items:center;gap:5px;
  padding:6px 14px;border:1.5px solid var(--gray-200);border-radius:var(--radius-xs);
  font-size:.78rem;font-weight:700;color:var(--gray-600);background:#fff;
  cursor:pointer;transition:border-color .15s,color .15s,background .15s;font-family:var(--font-body);
}
.btn-sm:hover{border-color:var(--accent-light);color:var(--accent);background:var(--accent-50)}
.btn-sm.copied{border-color:#059669;color:#059669;background:#ECFDF5}
.btn-sm svg{width:14px;height:14px}

.result-content{
  flex:1;font-size:.92rem;line-height:1.9;color:var(--gray-800);
  white-space:pre-wrap;word-break:break-word;
}
.result-footer{
  margin-top:16px;padding-top:12px;border-top:1px solid var(--gray-100);
  display:flex;align-items:center;justify-content:space-between;
}
.char-count{font-size:.75rem;color:var(--gray-400);font-family:var(--font-num)}
.btn-regenerate{
  display:inline-flex;align-items:center;gap:5px;
  padding:8px 16px;border:1.5px solid var(--gray-200);border-radius:var(--radius-xs);
  font-size:.82rem;font-weight:700;color:var(--gray-600);background:#fff;
  cursor:pointer;transition:border-color .15s,color .15s,background .15s;font-family:var(--font-body);
}
.btn-regenerate:hover{border-color:var(--accent);color:var(--accent);background:var(--accent-50)}
.btn-regenerate svg{width:14px;height:14px}

/* Skeleton loader */
.pulse-loader{display:none;flex:1;flex-direction:column;gap:14px;padding-top:20px}
.pulse-loader.active{display:flex}
.pulse-loader-label{
  font-size:.82rem;font-weight:600;color:var(--accent);
  display:flex;align-items:center;gap:8px;margin-bottom:6px;
}
.pulse-loader-label .pulse-dot{
  width:6px;height:6px;border-radius:50%;background:var(--accent);
  animation:pulse-dot-blink 1.2s ease-in-out infinite;
}
@keyframes pulse-dot-blink{0%,100%{opacity:.3}50%{opacity:1}}
.pulse-line{
  height:14px;border-radius:8px;
  background:linear-gradient(90deg,var(--gray-100) 25%,var(--accent-bg) 50%,var(--gray-100) 75%);
  background-size:200% 100%;
  animation:pulse-move 1.5s ease-in-out infinite;
}
.pulse-line:nth-child(2){width:90%;animation-delay:.1s}
.pulse-line:nth-child(3){width:72%;animation-delay:.2s}
.pulse-line:nth-child(4){width:85%;animation-delay:.3s}
.pulse-line:nth-child(5){width:58%;animation-delay:.4s}
.pulse-line:nth-child(6){width:68%;animation-delay:.5s}
@keyframes pulse-move{0%{background-position:200% 0}100%{background-position:-200% 0}}

/* â”€â”€â”€ MOBILE â”€â”€â”€ */
@media(max-width:900px){
  .templates-hero{grid-template-columns:1fr;align-items:start}
  .hero-section::before,.hero-section::after{display:none}
}
@media(max-width:768px){
  .cards-grid{grid-template-columns:1fr;}
  .card.featured{grid-column:auto;grid-row:auto;background:#fff}
  .card.featured:hover{background:var(--accent-50)}
  .card:hover{transform:translateY(-2px)}
  .editor-body{flex-direction:column}
  .panel-left{width:100%;min-width:0;border-right:none;border-bottom:1px solid var(--gray-200);padding:20px 16px}
  .panel-right{padding:20px 16px}
  .btn-generate{position:sticky;bottom:0;border-radius:0;margin:0 -16px;width:calc(100% + 32px);padding:16px}
  .templates-screen{padding:0 16px 32px}
  .hero-section{padding:24px 0 20px}
  .hero-tagline{font-size:.72rem;padding:4px 10px}
  .templates-hero h1{font-size:1.5rem}
  .site-header{padding:0 16px}
}
@media(max-width:480px){
  .tabs{gap:4px}
  .tab{padding:6px 12px;font-size:.8rem}
  .templates-hero h1{font-size:1.3rem}
  .card-badge{top:10px;right:10px;font-size:.6rem;padding:2px 8px}
}
</style>
</head>
<body>

<!-- HEADER -->
<header class="site-header">
  <a href="/" class="back-link">
    <svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M10 12L6 8l4-4"/></svg>
    â† ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªã«æˆ»ã‚‹
  </a>
  <div class="site-title">
    
    <span style="font-family:var(--font-head);font-weight:600;letter-spacing:.02em">AIã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç”Ÿæˆãƒ„ãƒ¼ãƒ«</span>
  </div>
  <span class="header-badge">DEMO</span>
</header>

<!-- SCREEN 1: TEMPLATE SELECT -->
<div id="screenTemplates" class="screen templates-screen active">
  <div class="hero-section">
    <div class="templates-hero">
      <div>
        <div class="hero-tagline">
          <svg viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M10 2v4M10 14v4M2 10h4M14 10h4M4.93 4.93l2.83 2.83M12.24 12.24l2.83 2.83M4.93 15.07l2.83-2.83M12.24 7.76l2.83-2.83"/></svg>
          AIãŒæ•°ç§’ã§é«˜å“è³ªãªæ–‡ç« ã‚’ç”Ÿæˆ
        </div>
        <h1>ã©ã‚“ãª<span class="hero-accent">æ–‡ç« </span>ã‚’ä½œã‚Šã¾ã™ã‹ï¼Ÿ</h1>
        <p class="hero-subtitle">ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’é¸ã‚“ã§ã€ä¸‹æ›¸ãã‚’ç”Ÿæˆã€‚æ°—ã«ãªã‚‹ã¨ã“ã‚ã¯ã€ã‚ã¨ã‹ã‚‰æ‰‹ç›´ã—ã§ãã¾ã™ã€‚</p>
      </div>
      <div class="templates-note">
        <strong>ğŸ’¡ ãƒ¡ãƒ¢</strong><br>
        ã“ã®ç”»é¢ã¯ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªç”¨ã®ãƒ‡ãƒ¢ã§ã™ã€‚ç”Ÿæˆçµæœã¯ä¾‹æ–‡ã«ãªã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚
      </div>
    </div>
  </div>

  <div class="tabs" id="tabs">
    <button class="tab active" data-cat="all">ã™ã¹ã¦</button>
    <button class="tab" data-cat="sns">SNSæŠ•ç¨¿</button>
    <button class="tab" data-cat="blog">ãƒ–ãƒ­ã‚°</button>
    <button class="tab" data-cat="copy">ã‚­ãƒ£ãƒƒãƒã‚³ãƒ”ãƒ¼</button>
    <button class="tab" data-cat="mail">ãƒ¡ãƒ¼ãƒ«</button>
  </div>

  <div class="cards-grid" id="cardsGrid"></div>
</div>

<!-- SCREEN 2: EDITOR -->
<div id="screenEditor" class="screen editor-screen">
  <div class="editor-top-bar">
    <button class="btn-back-editor" id="btnBackToTemplates">
      <svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M10 12L6 8l4-4"/></svg>
      ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆä¸€è¦§
    </button>
    <span class="editor-template-name" id="editorTemplateName"></span>
  </div>
  <div class="editor-body">
    <!-- Left: Input -->
    <div class="panel-left">
      <div>
        <h2 id="formTitle" style="font-family:var(--font-head);font-size:1.1rem;font-weight:600;color:var(--gray-900);margin-bottom:4px;letter-spacing:.02em"></h2>
        <p id="formDesc" style="font-size:.82rem;color:var(--gray-500);line-height:1.7"></p>
      </div>

      <div class="field-group">
        <label for="inputTopic">ãƒˆãƒ”ãƒƒã‚¯ / ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰</label>
        <textarea class="text-input" id="inputTopic" placeholder="ä¾‹: æ–°å•†å“ã®ã‚ªãƒ¼ã‚¬ãƒ‹ãƒƒã‚¯ã‚¹ã‚­ãƒ³ã‚±ã‚¢" rows="3"></textarea>
        <div class="hint">ãƒ†ãƒ¼ãƒã‚„è¦ç‚¹ã ã‘ã§ã‚‚OKã§ã™</div>
      </div>

      <div class="field-group">
        <label>ãƒˆãƒ¼ãƒ³</label>
        <div class="radio-group">
          <label class="radio-option"><input type="radio" name="tone" value="ã‚«ã‚¸ãƒ¥ã‚¢ãƒ«" checked><span>ã‚«ã‚¸ãƒ¥ã‚¢ãƒ«</span></label>
          <label class="radio-option"><input type="radio" name="tone" value="ãƒ“ã‚¸ãƒã‚¹"><span>ãƒ“ã‚¸ãƒã‚¹</span></label>
          <label class="radio-option"><input type="radio" name="tone" value="ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼"><span>ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼</span></label>
        </div>
      </div>

      <div class="field-group">
        <label>æ–‡å­—æ•°</label>
        <div class="segment-control">
          <label class="segment-option"><input type="radio" name="length" value="çŸ­ã‚" ><span>çŸ­ã‚</span></label>
          <label class="segment-option"><input type="radio" name="length" value="æ¨™æº–" checked><span>æ¨™æº–</span></label>
          <label class="segment-option"><input type="radio" name="length" value="é•·ã‚"><span>é•·ã‚</span></label>
        </div>
      </div>

      <button class="btn-generate" id="btnGenerate">
        <svg viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M10 2v4M10 14v4M2 10h4M14 10h4M4.93 4.93l2.83 2.83M12.24 12.24l2.83 2.83M4.93 15.07l2.83-2.83M12.24 7.76l2.83-2.83"/></svg>
        ç”Ÿæˆã™ã‚‹
      </button>
    </div>

    <!-- Right: Result -->
    <div class="panel-right">
      <div class="result-placeholder" id="resultPlaceholder">
        <svg viewBox="0 0 48 48" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect x="6" y="6" width="36" height="36" rx="4"/><path d="M14 18h20M14 24h16M14 30h12"/></svg>
        <p>å·¦ã®ãƒ•ã‚©ãƒ¼ãƒ ã‹ã‚‰ç”Ÿæˆã—ã¦ãã ã•ã„</p>
      </div>

      <div class="pulse-loader" id="pulseLoader">
        <div class="pulse-loader-label"><span class="pulse-dot"></span> AIãŒæ–‡ç« ã‚’è€ƒãˆã¦ã„ã¾ã™â€¦</div>
        <div class="pulse-line"></div>
        <div class="pulse-line"></div>
        <div class="pulse-line"></div>
        <div class="pulse-line"></div>
        <div class="pulse-line"></div>
      </div>

      <div class="result-area" id="resultArea">
        <div class="result-header">
          <span class="result-label"><span class="dot"></span> ç”Ÿæˆçµæœ</span>
          <div class="result-actions">
            <button class="btn-sm" id="btnCopy">
              <svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect x="5" y="5" width="9" height="9" rx="1.5"/><path d="M3 11V3a1.5 1.5 0 011.5-1.5H11"/></svg>
              ã‚³ãƒ”ãƒ¼
            </button>
          </div>
        </div>
        <div class="result-content" id="resultContent"></div>
        <div class="result-footer">
          <span class="char-count" id="charCount"></span>
          <button class="btn-regenerate" id="btnRegenerate">
            <svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M1 1v5h5"/><path d="M2.5 10A6 6 0 1014 8"/><path d="M1 6a6 6 0 002.5 4"/></svg>
            ã‚‚ã†ä¸€åº¦ç”Ÿæˆ
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
// â”€â”€â”€ CONFIG â”€â”€â”€
const DIFY_API_URL = '/api/chat';
const DIFY_API_KEY = 'app-3bJ23f6V7A8RM2L2vei8B0D6';

// â”€â”€â”€ TEMPLATES DATA â”€â”€â”€
const templates = [
  {
    id:'instagram', cat:'sns', name:'InstagramæŠ•ç¨¿æ–‡', catClass:'cat-sns',
    desc:'å†™çœŸã«åˆã‚ã›ãŸã‚­ãƒ£ãƒ—ã‚·ãƒ§ãƒ³ã¨ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°ã‚’ä½œæˆ',
    prompt:'InstagramæŠ•ç¨¿æ–‡',
    icon:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="2" width="20" height="20" rx="5"/><circle cx="12" cy="12" r="5"/><circle cx="17.5" cy="6.5" r="1.5" fill="currentColor" stroke="none"/></svg>',
    lengthGuide:{çŸ­ã‚:'100å­—ç¨‹åº¦',æ¨™æº–:'200å­—ç¨‹åº¦',é•·ã‚:'400å­—ç¨‹åº¦'},
    fallback:'è‡ªç„¶ã®åŠ›ã§ã€è‚Œæœ¬æ¥ã®ç¾ã—ã•ã‚’ã€‚\n\næ–°ã—ã„ã‚ªãƒ¼ã‚¬ãƒ‹ãƒƒã‚¯ã‚¹ã‚­ãƒ³ã‚±ã‚¢ã‚·ãƒªãƒ¼ã‚ºãŒç™»å ´ã—ã¾ã—ãŸ\nã“ã ã‚ã‚ŠæŠœã„ãŸå¤©ç„¶æˆåˆ†ãŒã€ã‚ãªãŸã®è‚Œã«ã‚„ã•ã—ãå¯„ã‚Šæ·»ã„ã¾ã™ã€‚\n\næœã®ã‚¹ã‚­ãƒ³ã‚±ã‚¢ãŒæ¥½ã—ã¿ã«ãªã‚‹ã€\nãã‚“ãªç‰¹åˆ¥ãªã‚¢ã‚¤ãƒ†ãƒ ã‚’ãœã²ä½“é¨“ã—ã¦ã¿ã¦ãã ã•ã„\n\n#ã‚ªãƒ¼ã‚¬ãƒ‹ãƒƒã‚¯ã‚¹ã‚­ãƒ³ã‚±ã‚¢ #ãƒŠãƒãƒ¥ãƒ©ãƒ«ãƒ“ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ¼ #æ–°å•†å“ #ã‚¹ã‚­ãƒ³ã‚±ã‚¢å¥½ãã•ã‚“ã¨ç¹‹ãŒã‚ŠãŸã„'
  },
  {
    id:'twitter', cat:'sns', name:'X(Twitter)ãƒã‚¹ãƒˆ', catClass:'cat-sns',
    desc:'140å­—ä»¥å†…ã§çŸ­ã„å‘ŠçŸ¥æ–‡ã‚’ä½œæˆ',
    prompt:'X(Twitter)ãƒã‚¹ãƒˆ',
    icon:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>',
    lengthGuide:{çŸ­ã‚:'80å­—ç¨‹åº¦',æ¨™æº–:'140å­—ç¨‹åº¦',é•·ã‚:'200å­—ç¨‹åº¦'},
    fallback:'ã‚ªãƒ¼ã‚¬ãƒ‹ãƒƒã‚¯ã‚¹ã‚­ãƒ³ã‚±ã‚¢ã€ã¤ã„ã«å®Œæˆ\n\n3å¹´ã‹ã‘ã¦é–‹ç™ºã—ãŸå¤©ç„¶ç”±æ¥æˆåˆ†100%ã®æ–°ã‚·ãƒªãƒ¼ã‚ºã€‚\n\nã€Œè‚Œã«ã‚„ã•ã—ã„ã€ã ã‘ã˜ã‚ƒãªã„ã€‚\nä½¿ã†ãŸã³ã«å®Ÿæ„Ÿã§ãã‚‹ã€æœ¬ç‰©ã®æ½¤ã„ã€‚\n\nä»Šãªã‚‰åˆå›é™å®š30%OFF '
  },
  {
    id:'facebook', cat:'sns', name:'FacebookæŠ•ç¨¿', catClass:'cat-sns',
    desc:'å°‘ã—ä¸å¯§ãªç´¹ä»‹æ–‡ã‚’ä½œæˆ',
    prompt:'FacebookæŠ•ç¨¿',
    icon:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>',
    lengthGuide:{çŸ­ã‚:'150å­—ç¨‹åº¦',æ¨™æº–:'300å­—ç¨‹åº¦',é•·ã‚:'500å­—ç¨‹åº¦'},
    fallback:'ã€æ–°å•†å“ã®ã”ç´¹ä»‹ã€‘\n\nã„ã¤ã‚‚ã”è¦§ã„ãŸã ãã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™\n\næœ¬æ—¥ã¯ã€é•·ã„é–‹ç™ºæœŸé–“ã‚’çµŒã¦ã‚ˆã†ã‚„ãå®Œæˆã—ãŸ\nã‚ªãƒ¼ã‚¬ãƒ‹ãƒƒã‚¯ã‚¹ã‚­ãƒ³ã‚±ã‚¢ã‚·ãƒªãƒ¼ã‚ºã‚’ã”ç´¹ä»‹ã—ã¾ã™ã€‚\n\nå¤©ç„¶ç”±æ¥æˆåˆ†100%ä½¿ç”¨\næ•æ„Ÿè‚Œã®æ–¹ã«ã‚‚å®‰å¿ƒ\nã‚¨ã‚¤ã‚¸ãƒ³ã‚°ã‚±ã‚¢ã«ã‚‚å¯¾å¿œ\n\nã€Œæœ¬å½“ã«è‚Œã«ã„ã„ã‚‚ã®ã‚’ä½¿ã„ãŸã„ã€\nãã‚“ãªæƒ³ã„ã«å¿œãˆã‚‹ãŸã‚ã«ç”Ÿã¾ã‚ŒãŸã‚·ãƒªãƒ¼ã‚ºã§ã™ã€‚\n\nè©³ã—ãã¯ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã®ãƒªãƒ³ã‚¯ã‹ã‚‰\nã”è³ªå•ã¯ãŠæ°—è»½ã«ã‚³ãƒ¡ãƒ³ãƒˆãã ã•ã„ï¼'
  },
  {
    id:'blog-intro', cat:'blog', name:'ãƒ–ãƒ­ã‚°å°å…¥æ–‡', catClass:'cat-blog',
    desc:'èª­è€…ãŒç¶šãã‚’èª­ã¿ãŸããªã‚‹æ›¸ãå‡ºã—ã‚’ä½œæˆ',
    prompt:'ãƒ–ãƒ­ã‚°å°å…¥æ–‡',
    icon:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M12 20h9"/><path d="M16.5 3.5a2.121 2.121 0 013 3L7 19l-4 1 1-4L16.5 3.5z"/></svg>',
    lengthGuide:{çŸ­ã‚:'150å­—ç¨‹åº¦',æ¨™æº–:'300å­—ç¨‹åº¦',é•·ã‚:'500å­—ç¨‹åº¦'},
    fallback:'ã€Œæ¯æ—¥ã®ã‚¹ã‚­ãƒ³ã‚±ã‚¢ã€æœ¬å½“ã«è‚Œã«åˆã£ã¦ã„ã¾ã™ã‹ï¼Ÿã€\n\nå¤šãã®æ–¹ãŒä½•ã¨ãªãé¸ã‚“ã ã‚¹ã‚­ãƒ³ã‚±ã‚¢å•†å“ã‚’ä½¿ã„ç¶šã‘ã¦ã„ã¾ã™ãŒã€å®Ÿã¯è‚Œãƒˆãƒ©ãƒ–ãƒ«ã®åŸå› ãŒãã“ã«æ½œã‚“ã§ã„ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚\n\nè¿‘å¹´ã€ã‚ªãƒ¼ã‚¬ãƒ‹ãƒƒã‚¯ã‚¹ã‚­ãƒ³ã‚±ã‚¢ã¸ã®æ³¨ç›®ãŒé«˜ã¾ã£ã¦ã„ã¾ã™ã€‚å¤©ç„¶ç”±æ¥ã®æˆåˆ†ãŒæŒã¤åŠ›ã¯ã€å°‘ã—ãšã¤æ¤œè¨¼ã‚‚é€²ã¿ã€å¾“æ¥ã®ã‚±ã‚¢ã®é¸ã³æ–¹ãŒè¦‹ç›´ã•ã‚Œã¤ã¤ã‚ã‚Šã¾ã™ã€‚\n\nã“ã®è¨˜äº‹ã§ã¯ã€ã‚ªãƒ¼ã‚¬ãƒ‹ãƒƒã‚¯ã‚¹ã‚­ãƒ³ã‚±ã‚¢ãŒæ³¨ç›®ã•ã‚Œã‚‹ç†ç”±ã¨ã€è‡ªåˆ†ã«åˆã£ãŸå•†å“ã®é¸ã³æ–¹ã‚’è§£èª¬ã—ã¦ã„ãã¾ã™ã€‚'
  },
  {
    id:'blog-outline', cat:'blog', name:'è¦‹å‡ºã—æ§‹æˆæ¡ˆ', catClass:'cat-blog',
    desc:'è¨˜äº‹ã®è¦‹å‡ºã—ã‚’æ•´ç†ã—ã¦ææ¡ˆ',
    prompt:'ãƒ–ãƒ­ã‚°ã®è¦‹å‡ºã—æ§‹æˆæ¡ˆ',
    icon:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M4 6h16"/><path d="M4 10h16"/><path d="M4 14h10"/><path d="M4 18h12"/></svg>',
    lengthGuide:{çŸ­ã‚:'5ã¤ç¨‹åº¦',æ¨™æº–:'8ã¤ç¨‹åº¦',é•·ã‚:'12ã¤ç¨‹åº¦'},
    fallback:'# ã‚ªãƒ¼ã‚¬ãƒ‹ãƒƒã‚¯ã‚¹ã‚­ãƒ³ã‚±ã‚¢å®Œå…¨ã‚¬ã‚¤ãƒ‰\n\n## H2: ã‚ªãƒ¼ã‚¬ãƒ‹ãƒƒã‚¯ã‚¹ã‚­ãƒ³ã‚±ã‚¢ã¨ã¯ï¼Ÿ\n  - H3: ä¸€èˆ¬çš„ãªã‚¹ã‚­ãƒ³ã‚±ã‚¢ã¨ã®é•ã„\n  - H3: ã‚ªãƒ¼ã‚¬ãƒ‹ãƒƒã‚¯èªè¨¼ã®åŸºæº–\n\n## H2: ãªãœä»Šã‚ªãƒ¼ã‚¬ãƒ‹ãƒƒã‚¯ãŒé¸ã°ã‚Œã‚‹ã®ã‹\n  - H3: æ•æ„Ÿè‚Œã¸ã®å„ªã—ã•\n  - H3: ç’°å¢ƒã¸ã®é…æ…®\n  - H3: é•·æœŸçš„ãªè‚Œã¸ã®åŠ¹æœ\n\n## H2: å¤±æ•—ã—ãªã„é¸ã³æ–¹5ã¤ã®ãƒã‚¤ãƒ³ãƒˆ\n  - H3: æˆåˆ†è¡¨ç¤ºã®èª­ã¿æ–¹\n  - H3: è‡ªåˆ†ã®è‚Œã‚¿ã‚¤ãƒ—ã‚’çŸ¥ã‚‹\n\n## H2: ãŠã™ã™ã‚ã‚ªãƒ¼ã‚¬ãƒ‹ãƒƒã‚¯ãƒ–ãƒ©ãƒ³ãƒ‰3é¸\n\n## H2: ã¾ã¨ã‚ï¼šä»Šæ—¥ã‹ã‚‰å§‹ã‚ã‚‹ã‚ªãƒ¼ã‚¬ãƒ‹ãƒƒã‚¯ã‚±ã‚¢'
  },
  {
    id:'catchcopy', cat:'copy', name:'å•†å“ã‚­ãƒ£ãƒƒãƒã‚³ãƒ”ãƒ¼', catClass:'cat-copy',
    desc:'çŸ­ã„ã‚³ãƒ”ãƒ¼æ¡ˆã‚’è¤‡æ•°ç”Ÿæˆ',
    prompt:'å•†å“ã‚­ãƒ£ãƒƒãƒã‚³ãƒ”ãƒ¼',
    icon:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26"/></svg>',
    lengthGuide:{çŸ­ã‚:'3æ¡ˆ',æ¨™æº–:'5æ¡ˆ',é•·ã‚:'10æ¡ˆ'},
    fallback:'å•†å“ã‚­ãƒ£ãƒƒãƒã‚³ãƒ”ãƒ¼æ¡ˆ\n\n1. ã€Œç´ è‚ŒãŒå–œã¶ã€è‡ªç„¶ã®ã¡ã‹ã‚‰ã€\n2. ã€Œã¤ã‘ãŸç¬é–“ã€è‚ŒãŒæ·±å‘¼å¸ã™ã‚‹ã€\n3. ã€Œ100å¹´å¾Œã®è‚Œã«ã‚‚ã€ã‚„ã•ã—ã„é¸æŠã‚’ã€\n4. ã€ŒåŒ–å­¦ã®åŠ›ã«é ¼ã‚‰ãªã„ã€æœ¬ç‰©ã®ã†ã‚‹ãŠã„ã€\n5. ã€Œã‚ãªãŸã®è‚Œã¯ã€ã‚‚ã£ã¨ç¾ã—ããªã‚Œã‚‹ã€'
  },
  {
    id:'lp-headline', cat:'copy', name:'LPè¦‹å‡ºã—', catClass:'cat-copy',
    desc:'ãƒ¡ã‚¤ãƒ³è¦‹å‡ºã—ã¨ã‚µãƒ–ã‚³ãƒ”ãƒ¼ã‚’ä½œæˆ',
    prompt:'ãƒ©ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ãƒšãƒ¼ã‚¸ã®è¦‹å‡ºã—ã¨ã‚µãƒ–ã‚³ãƒ”ãƒ¼',
    icon:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2"/><path d="M3 9h18"/><path d="M9 21V9"/></svg>',
    lengthGuide:{çŸ­ã‚:'ãƒ¡ã‚¤ãƒ³+ã‚µãƒ–å„1æ¡ˆ',æ¨™æº–:'ãƒ¡ã‚¤ãƒ³+ã‚µãƒ–å„3æ¡ˆ',é•·ã‚:'ãƒ¡ã‚¤ãƒ³+ã‚µãƒ–å„5æ¡ˆ+CTA'},
    fallback:'LPè¦‹å‡ºã—æ¡ˆ\n\nã€æ¡ˆ1ã€‘\nãƒ¡ã‚¤ãƒ³: è‚ŒãŒå¤‰ã‚ã‚‹ã¨ã€æ¯æ—¥ãŒå¤‰ã‚ã‚‹ã€‚\nã‚µãƒ–: å¤©ç„¶ç”±æ¥æˆåˆ†100%ã®ã‚ªãƒ¼ã‚¬ãƒ‹ãƒƒã‚¯ã‚¹ã‚­ãƒ³ã‚±ã‚¢ã§ã€ã‚ãªãŸæœ¬æ¥ã®ç¾ã—ã•ã‚’å¼•ãå‡ºã—ã¾ã™ã€‚\n\nã€æ¡ˆ2ã€‘\nãƒ¡ã‚¤ãƒ³: ã‚‚ã†ã€è‚Œã«å˜˜ã‚’ã¤ã‹ãªã„ã€‚\nã‚µãƒ–: è‡ªç„¶ã®åŠ›ã ã‘ã§ç”Ÿã¾ã‚ŒãŸã€æ–°ã—ã„ã‚¹ã‚­ãƒ³ã‚±ã‚¢ã®å½¢ã€‚'
  },
  {
    id:'thank-mail', cat:'mail', name:'ãŠç¤¼ãƒ¡ãƒ¼ãƒ«', catClass:'cat-mail',
    desc:'ä¸å¯§ãªãŠç¤¼ãƒ¡ãƒ¼ãƒ«ã‚’ä½œæˆ',
    prompt:'ãŠç¤¼ãƒ¡ãƒ¼ãƒ«',
    icon:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M22 12h-6l-2 3h-4l-2-3H2"/><path d="M5.45 5.11L2 12v6a2 2 0 002 2h16a2 2 0 002-2v-6l-3.45-6.89A2 2 0 0016.76 4H7.24a2 2 0 00-1.79 1.11z"/></svg>',
    lengthGuide:{çŸ­ã‚:'100å­—ç¨‹åº¦',æ¨™æº–:'200å­—ç¨‹åº¦',é•·ã‚:'400å­—ç¨‹åº¦'},
    fallback:'ä»¶å: å…ˆæ—¥ã®ãŠæ‰“ã¡åˆã‚ã›ã®ãŠç¤¼\n\nâ—‹â—‹æ ªå¼ä¼šç¤¾\nâ—‹â—‹æ§˜\n\nãŠä¸–è©±ã«ãªã£ã¦ãŠã‚Šã¾ã™ã€‚\nâ–³â–³æ ªå¼ä¼šç¤¾ã®â–¡â–¡ã§ã™ã€‚\n\nå…ˆæ—¥ã¯ãŠå¿™ã—ã„ä¸­ã€ãŠæ™‚é–“ã‚’ã„ãŸã ãèª ã«ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸã€‚\n\nå¼•ãç¶šãã€ã©ã†ãã‚ˆã‚ã—ããŠé¡˜ã„ã„ãŸã—ã¾ã™ã€‚\n\nâ–³â–³æ ªå¼ä¼šç¤¾\nâ–¡â–¡'
  },
  {
    id:'sales-mail', cat:'mail', name:'å–¶æ¥­ãƒ¡ãƒ¼ãƒ«', catClass:'cat-mail',
    desc:'çŸ­ã„ææ¡ˆæ–‡ã®ãŸãŸãå°ã‚’ä½œæˆ',
    prompt:'å–¶æ¥­ãƒ¡ãƒ¼ãƒ«',
    icon:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg>',
    lengthGuide:{çŸ­ã‚:'150å­—ç¨‹åº¦',æ¨™æº–:'300å­—ç¨‹åº¦',é•·ã‚:'500å­—ç¨‹åº¦'},
    fallback:'ä»¶å: ã”ææ¡ˆã®ã”ç›¸è«‡\n\nâ—‹â—‹æ ªå¼ä¼šç¤¾\nã”æ‹…å½“è€…æ§˜\n\nçªç„¶ã®ã”é€£çµ¡å¤±ç¤¼ã„ãŸã—ã¾ã™ã€‚â–³â–³æ ªå¼ä¼šç¤¾ã®â–¡â–¡ã¨ç”³ã—ã¾ã™ã€‚\n\nå¾¡ç¤¾ã®å–ã‚Šçµ„ã¿ã‚’æ‹è¦‹ã—ã€ç°¡å˜ã«ã”ææ¡ˆã‚’ãŠé€ã‚Šã—ã¾ã—ãŸã€‚\nã”éƒ½åˆã®ã‚ˆã„æ—¥æ™‚ãŒã‚ã‚Œã°ã€15åˆ†ã»ã©ãŠæ™‚é–“ã‚’ã„ãŸã ã‘ã¾ã™ã¨å¹¸ã„ã§ã™ã€‚\n\nä½•å’ã‚ˆã‚ã—ããŠé¡˜ã„ã„ãŸã—ã¾ã™ã€‚'
  }
];

// â”€â”€â”€ STATE â”€â”€â”€
let currentTemplate = null;
let userId = 'user-' + Math.random().toString(36).slice(2,10);

// Pick a featured template to break the grid
const FEATURED_ID = 'blog-intro';

// Card metadata: badges & preview hints
const cardMeta = {
  'instagram': { badge:'äººæ°—', badgeClass:'popular', preview:'ã‚­ãƒ£ãƒ—ã‚·ãƒ§ãƒ³ + ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°ææ¡ˆã‚’ä¸€æ‹¬ä½œæˆ' },
  'blog-intro': { badge:'ãŠã™ã™ã‚', badgeClass:'recommend', preview:'èª­è€…ã‚’å¼•ãè¾¼ã‚€æ›¸ãå‡ºã—æ–‡ã‚’æ•°ãƒ‘ã‚¿ãƒ¼ãƒ³ç”Ÿæˆ' },
  'catchcopy': { badge:'äººæ°—', badgeClass:'popular', preview:'ã‚³ãƒ³ã‚»ãƒ—ãƒˆã‹ã‚‰ã‚³ãƒ”ãƒ¼æ¡ˆã‚’è¤‡æ•°ææ¡ˆ' },
  'sales-mail': { badge:'NEW', badgeClass:'new-badge', preview:'åˆå›ã‚¢ãƒ—ãƒ­ãƒ¼ãƒç”¨ã®ææ¡ˆæ–‡ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ' },
};

// â”€â”€â”€ RENDER CARDS â”€â”€â”€
function renderCards(cat) {
  const grid = document.getElementById('cardsGrid');
  const filtered = cat === 'all' ? templates : templates.filter(t => t.cat === cat);

  grid.innerHTML = filtered.map(t => {
    const featured = (cat === 'all' && t.id === FEATURED_ID) ? ' featured' : '';
    const meta = cardMeta[t.id] || {};
    const badgeHtml = meta.badge ? `<span class="card-badge ${meta.badgeClass}">${meta.badge}</span>` : '';
    const previewHtml = meta.preview ? `<div class="card-preview"><em>ğŸ’¡</em> ${meta.preview}</div>` : '';
    return `
      <div class="card ${t.catClass}${featured}" data-id="${t.id}">
        ${badgeHtml}
        <div class="card-icon">${t.icon}</div>
        <h3>${t.name}</h3>
        <p>${t.desc}</p>
        ${previewHtml}
      </div>
    `;
  }).join('');

  grid.querySelectorAll('.card').forEach(card => {
    card.addEventListener('click', () => {
      const tpl = templates.find(t => t.id === card.dataset.id);
      if (tpl) openEditor(tpl);
    });
  });
}

// â”€â”€â”€ TABS â”€â”€â”€
document.getElementById('tabs').addEventListener('click', e => {
  if (!e.target.classList.contains('tab')) return;
  document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
  e.target.classList.add('active');
  renderCards(e.target.dataset.cat);
});

// â”€â”€â”€ SCREENS â”€â”€â”€
function showScreen(id) {
  document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}

function openEditor(tpl) {
  currentTemplate = tpl;
  document.getElementById('editorTemplateName').textContent = tpl.name;
  document.getElementById('formTitle').textContent = tpl.name;
  document.getElementById('formDesc').textContent = tpl.desc;
  document.getElementById('inputTopic').value = '';

  // Reset result
  document.getElementById('resultPlaceholder').style.display = 'flex';
  document.getElementById('pulseLoader').classList.remove('active');
  document.getElementById('resultArea').style.display = 'none';

  showScreen('screenEditor');
}

document.getElementById('btnBackToTemplates').addEventListener('click', () => {
  showScreen('screenTemplates');
});

// â”€â”€â”€ GENERATE â”€â”€â”€
document.getElementById('btnGenerate').addEventListener('click', generate);

async function generate() {
  if (!currentTemplate) return;
  const topicEl = document.getElementById('inputTopic');
  const topic = topicEl.value.trim();
  if (!topic) {
    topicEl.focus();
    topicEl.style.borderColor = '#EF4444';
    setTimeout(() => { topicEl.style.borderColor = ''; }, 1500);
    return;
  }

  const tone = document.querySelector('input[name="tone"]:checked').value;
  const length = document.querySelector('input[name="length"]:checked').value;
  const lengthDesc = currentTemplate.lengthGuide[length] || length;

  const query = `ä»¥ä¸‹ã®æ¡ä»¶ã§${currentTemplate.prompt}ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚\nãƒˆãƒ”ãƒƒã‚¯: ${topic}\nãƒˆãƒ¼ãƒ³: ${tone}\næ–‡å­—æ•°: ${length}ï¼ˆ${lengthDesc}ï¼‰`;

  // UI: loading state (no spinner)
  const btn = document.getElementById('btnGenerate');
  btn.disabled = true;
  btn.textContent = 'ç”Ÿæˆä¸­...';

  document.getElementById('resultPlaceholder').style.display = 'none';
  document.getElementById('resultArea').style.display = 'none';
  document.getElementById('pulseLoader').classList.add('active');

  let resultText = '';

  try {
    const response = await fetch(DIFY_API_URL, {
      method: 'POST',
      headers: {
        'Authorization': `Bearer ${DIFY_API_KEY}`,
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        inputs: {},
        query: query,
        response_mode: 'blocking',
        conversation_id: '',
        user: userId,
        files: []
      })
    });

    if (!response.ok) throw new Error(`API ${response.status}`);
    const data = await response.json();
    resultText = data.answer || data.result || '';
    if (!resultText) throw new Error('Empty response');
  } catch (err) {
    console.warn('API error, using fallback:', err);
    resultText = currentTemplate.fallback;
  }

  document.getElementById('pulseLoader').classList.remove('active');
  document.getElementById('resultArea').style.display = 'flex';
  await typeText(resultText);

  btn.disabled = false;
  btn.innerHTML = '<svg viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M10 2v4M10 14v4M2 10h4M14 10h4M4.93 4.93l2.83 2.83M12.24 12.24l2.83 2.83M4.93 15.07l2.83-2.83M12.24 7.76l2.83-2.83"/></svg> ç”Ÿæˆã™ã‚‹';
}

// â”€â”€â”€ TYPING EFFECT â”€â”€â”€
async function typeText(text) {
  const el = document.getElementById('resultContent');
  const countEl = document.getElementById('charCount');
  el.textContent = '';
  countEl.textContent = '';

  const chars = [...text];
  const total = chars.length;
  let i = 0;

  return new Promise(resolve => {
    function tick() {
      if (i >= total) {
        countEl.textContent = `${total} æ–‡å­—`;
        resolve();
        return;
      }
      const ch = chars[i];
      el.textContent += ch;
      i++;
      const delay = (ch === '\n' || ch === ' ') ? 8 : Math.random() * 18 + 12;
      setTimeout(tick, delay);
    }
    tick();
  });
}

// â”€â”€â”€ COPY â”€â”€â”€
document.getElementById('btnCopy').addEventListener('click', async () => {
  const text = document.getElementById('resultContent').textContent;
  if (!text) return;
  try {
    await navigator.clipboard.writeText(text);
    const btn = document.getElementById('btnCopy');
    btn.classList.add('copied');
    btn.innerHTML = '<svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3.5 8.5l3 3 6-6"/></svg> ã‚³ãƒ”ãƒ¼æ¸ˆã¿';
    setTimeout(() => {
      btn.classList.remove('copied');
      btn.innerHTML = '<svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect x="5" y="5" width="9" height="9" rx="1.5"/><path d="M3 11V3a1.5 1.5 0 011.5-1.5H11"/></svg> ã‚³ãƒ”ãƒ¼';
    }, 2000);
  } catch (e) {
    const ta = document.createElement('textarea');
    ta.value = text;
    document.body.appendChild(ta);
    ta.select();
    document.execCommand('copy');
    document.body.removeChild(ta);
  }
});

// â”€â”€â”€ REGENERATE â”€â”€â”€
document.getElementById('btnRegenerate').addEventListener('click', generate);

// â”€â”€â”€ INIT â”€â”€â”€
renderCards('all');
</script>
</body>
</html>
